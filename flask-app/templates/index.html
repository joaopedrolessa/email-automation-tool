<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Formulário de E-mail e Arquivo</title>
<head>
        <meta charset="UTF-8">
        <title>Formulário de E-mail e Arquivo</title>
        <style>
                body {
                        font-family: Arial, Helvetica, sans-serif;
                        background: #f7f7fa;
                        margin: 0;
                        padding: 0;
                }
                h1 {
                        color: #2c3e50;
                        text-align: center;
                        margin-top: 32px;
                }
                form {
                        background: #fff;
                        max-width: 480px;
                        margin: 32px auto;
                        padding: 24px 32px;
                        border-radius: 8px;
                        box-shadow: 0 2px 8px rgba(44,62,80,0.08);
                }
                label {
                        font-weight: bold;
                        color: #34495e;
                }
                input[type="radio"] {
                        margin-right: 8px;
                }
                textarea {
                        width: 100%;
                        border-radius: 4px;
                        border: 1px solid #ccc;
                        padding: 8px;
                        font-size: 1em;
                        margin-bottom: 16px;
                }
                input[type="file"] {
                        margin-bottom: 16px;
                }
                button {
                        background: #2c3e50;
                        color: #fff;
                        border: none;
                        border-radius: 4px;
                        padding: 10px 24px;
                        font-size: 1em;
                        cursor: pointer;
                        transition: background 0.2s;
                }
                button:hover {
                        background: #34495e;
                }
                ul {
                        background: #eaf2fb;
                        border-radius: 4px;
                        padding: 12px 20px;
                        max-width: 480px;
                        margin: 16px auto;
                        color: #2c3e50;
                }
                pre {
                        background: #f4f4f4;
                        border-radius: 4px;
                        padding: 12px;
                        max-width: 480px;
                        margin: 16px auto;
                        font-size: 1em;
                        color: #34495e;
                        overflow-x: auto;
                }
        </style>
</head>
        <h1>Enviar texto do E-mail e Arquivo</h1>
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <ul>
                {% for message in messages %}
                    <li>{{ message }}</li>
                {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}

        <form method="post" enctype="multipart/form-data">
                <label><strong>Como deseja enviar o e-mail?</strong></label><br>
                <input type="radio" name="input_type" value="file" id="input_file" checked>
                <label for="input_file">Enviar arquivo (.txt ou .pdf)</label>
                <input type="radio" name="input_type" value="text" id="input_text">
                <label for="input_text">Colar texto manualmente</label>
                <br><br>

                <div id="file_area">
                        <label for="file"><strong>Selecione o arquivo (.txt ou .pdf):</strong></label><br>
                        <input type="file" name="file" id="file" accept=".txt,.pdf">
                        <small>Escolha um arquivo de email para análise automática.</small>
                </div>

                <div id="text_area" style="display:none;">
                        <label for="email_text"><strong>Digite ou cole o texto do e-mail:</strong></label><br>
                        <textarea name="email_text" id="email_text" rows="8" cols="50" placeholder="Cole aqui o texto do email..."></textarea>
                        <small>Use esta opção se não tiver o arquivo.</small>
                </div>
                <br>
                <button type="submit"><strong>Analisar Email</strong></button>
        </form>

                {% if categoria %}
                        <h2>Classificação do Email:</h2>
                        <pre>{{ categoria }}</pre>
                {% endif %}
                {% if resposta %}
                        <h2>Resposta Sugerida:</h2>
                        <pre>{{ resposta }}</pre>
                {% endif %}

                <script>
                document.querySelectorAll('input[name="input_type"]').forEach(function(el) {
                        el.addEventListener('change', function() {
                                if (this.value === 'text') {
                                        document.getElementById('text_area').style.display = '';
                                        document.getElementById('file_area').style.display = 'none';
                                } else {
                                        document.getElementById('text_area').style.display = 'none';
                                        document.getElementById('file_area').style.display = '';
                                }
                        });
                });
                // Garante que a opção padrão seja o envio de arquivo
                window.onload = function() {
                        document.getElementById('input_file').checked = true;
                        document.getElementById('file_area').style.display = '';
                        document.getElementById('text_area').style.display = 'none';
                };
                </script>
</body>
</html>
